#!/bin/bash
# Description: tofi script to take screenshots
# Dependencies: tofi, maim, slop
# Shell: Bash
set -eu -o pipefail

# Variables
DIR="$HOME/Pictures/screenshots"
FORMAT="$DIR/$(date '+%y%m%d-%H%M-%S').png"

select=$(printf "selected area (copy)\nfull screen (copy)\nselected area\nfull screen" |
	tofi -l 6 --prompt-text "Screenshot which area?")

case $select in
	"selected area")
		maim -us "$FORMAT"
		notify-send "maimpick" "Screenshot taken"
		;;
	"full screen")
		maim "$FORMAT"
		notify-send "maimpick" "Screenshot taken"
		;;
	"selected area (copy)")
		maim -us | xclip -selection clipboard -t image/png
		notify-send "maimpick" "Screenshot copied to clipboard"
		;;
	"full screen (copy)")
		maim -u | xclip -selection clipboard -t image/png
		notify-send "maimpick" "Screenshot copied to clibboard"
		;;
esac
